function D(e){throw new Error(e)}function m(e){return e===void 0?{BS_PRIVATE_NESTED_SOME_NONE:0}:e!==null&&e.BS_PRIVATE_NESTED_SOME_NONE!==void 0?{BS_PRIVATE_NESTED_SOME_NONE:e.BS_PRIVATE_NESTED_SOME_NONE+1|0}:e}function d(e){if(!(e!==null&&e.BS_PRIVATE_NESTED_SOME_NONE!==void 0))return e;var n=e.BS_PRIVATE_NESTED_SOME_NONE;if(n!==0)return{BS_PRIVATE_NESTED_SOME_NONE:n-1|0}}function O(e,n){if(n in e)return m(e[n])}function y(e){if(typeof e=="string")return e}function k(e){if(typeof e=="object"&&!Array.isArray(e)&&e!==null)return e}function b(e){if(Array.isArray(e))return e}function T(e,n,t){for(var r=new Array(t),i=0,u=n;i<t;)r[i]=e[u],i=i+1|0,u=u+1|0;return r}function C(e,n){for(;;){var t=n,r=e,i=r.length,u=i===0?1:i,o=t.length,c=u-o|0;if(c===0)return r.apply(null,t);if(c>=0)return function(f,E){return function(h){return C(f,E.concat([h]))}}(r,t);n=T(t,u,-c|0),e=r.apply(null,T(t,0,u))}}function B(e,n){var t=e.length;if(t===1)return e(n);switch(t){case 1:return e(n);case 2:return function(r){return e(n,r)};case 3:return function(r,i){return e(n,r,i)};case 4:return function(r,i,u){return e(n,r,i,u)};case 5:return function(r,i,u,o){return e(n,r,i,u,o)};case 6:return function(r,i,u,o,c){return e(n,r,i,u,o,c)};case 7:return function(r,i,u,o,c,f){return e(n,r,i,u,o,c,f)};default:return C(e,[n])}}function R(e){var n=e.length;return n===1?e:function(t){return B(e,t)}}function M(e,n){if(n<e.length)return m(e[n])}function V(e,n){for(var t=0,r=e.length;t<r;++t)n(e[t])}function $(e,n){V(e,R(n))}function q(e,n){for(var t=e.length,r=new Array(t),i=0,u=0;u<t;++u){var o=e[u];n(o)&&(r[i]=o,i=i+1|0)}return r.length=i,r}function F(e,n){return q(e,R(n))}function s(e){if(e!==void 0)return d(e);throw{RE_EXN_ID:"Not_found",Error:new Error}}function U(e){return e==null?!1:typeof e.RE_EXN_ID=="string"}function H(e){return U(e)?e:{RE_EXN_ID:"JsError",_1:e}}function W(e,n){return e.catch(function(t){return n(H(t))})}function X(e){if(typeof e=="object")return e._0;switch(e){case"Get":return"GET";case"Head":return"HEAD";case"Post":return"POST";case"Put":return"PUT";case"Delete":return"DELETE";case"Connect":return"CONNECT";case"Options":return"OPTIONS";case"Trace":return"TRACE";case"Patch":return"PATCH"}}function j(e){switch(e){case"None":return"";case"NoReferrer":return"no-referrer";case"NoReferrerWhenDowngrade":return"no-referrer-when-downgrade";case"SameOrigin":return"same-origin";case"Origin":return"origin";case"StrictOrigin":return"strict-origin";case"OriginWhenCrossOrigin":return"origin-when-cross-origin";case"StrictOriginWhenCrossOrigin":return"strict-origin-when-cross-origin";case"UnsafeUrl":return"unsafe-url"}}function L(e){switch(e){case"Navigate":return"navigate";case"SameOrigin":return"same-origin";case"NoCORS":return"no-cors";case"CORS":return"cors"}}function G(e){switch(e){case"Omit":return"omit";case"SameOrigin":return"same-origin";case"Include":return"include"}}function J(e){switch(e){case"Default":return"default";case"NoStore":return"no-store";case"Reload":return"reload";case"NoCache":return"no-cache";case"ForceCache":return"force-cache";case"OnlyIfCached":return"only-if-cached"}}function z(e){switch(e){case"Follow":return"follow";case"Error":return"error";case"Manual":return"manual"}}function l(e,n){if(n!==void 0)return m(e(d(n)))}function K(e,n,t,r,i,u,o,c,f,E,h,v,ne){var I=i!==void 0?i:"None",A=E!==void 0?E:"",a={referrerPolicy:j(I),integrity:A},g=l(X,e);g!==void 0&&(a.method=g),n!==void 0&&(a.headers=d(n)),t!==void 0&&(a.body=d(t)),r!==void 0&&(a.referrer=r);var _=l(L,u);_!==void 0&&(a.mode=_);var N=l(G,o);N!==void 0&&(a.credentials=N);var S=l(J,c);S!==void 0&&(a.cache=S);var p=l(z,f);return p!==void 0&&(a.redirect=p),h!==void 0&&(a.keepalive=h),v!==void 0&&(a.signal=d(v)),a}var Q={make:K},Y=function(e){var n=e.defaultView;if(n!=null){var t=n.HTMLDocument;if(t!=null&&e instanceof t)return e}};function Z(e){var n=Y(document);if(n!==void 0){var t=d(n).cookie,r=F(t.split(";"),function(c){return c.trim().startsWith(e+"=")}),i=M(r,0);if(i!==void 0){var u=i.trim(),o=e.length;return decodeURIComponent(u.substring(o+1|0,u.length))}}}function w(e,n){var t=fetch("/post/"+e+"/comments/").then(function(r){return r.json()}).then(function(r){return n.innerHTML="",Promise.resolve(b(r))}).then(function(r){return Promise.resolve(s(r))});return t.then(function(r){return Promise.resolve($(r,function(i){var u=document.createElement("li"),o=s(k(i)),c=s(y(s(O(o,"body")))),f=s(y(s(O(o,"author_username"))));u.textContent=f+": "+c,n.appendChild(u)}))})}function x(e,n,t){var r={};r["Content-Type"]="application/json";var i=Z("csrftoken");i!==void 0&&(r["X-CSRFToken"]=i);var u={};return u.body=n,W(fetch("/post/"+e+"/comments/",Q.make("Post",m(r),m(JSON.stringify(u)),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)).then(function(o){return o.ok?w(e,t).then(function(){return Promise.resolve(!0)}):Promise.reject(D("Failed to post comment"))}),function(o){return console.error("Error submitting comment:",o),alert("Failed to post comment. Please try again."),Promise.resolve(!1)})}const P=document.getElementById("comment-list"),ee=document.getElementById("submit-comment");ee.addEventListener("click",async()=>{const e=document.getElementById("comment-content").value.trim();e&&(await x(postId,e,P),document.getElementById("comment-content").value="")});w(postId,P);
